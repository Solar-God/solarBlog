(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mixLogin/index"],{"328b":function(e,n,t){"use strict";t.r(n);var o=t("8a04"),a=t("81fc");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("976a");var s,r=t("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=u.exports},"47e9":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{username:"",password:"",isShowDeal:!1}},onShow:function(){e.showToast({title:"请先登录",icon:"none"})},methods:{saveUserInfo:function(n){e.setStorageSync("avatar",n.data.avatar),e.setStorageSync("nickname",n.data.nickname),e.setStorageSync("userId",n.data.id),e.setStorageSync("intro",n.data.intro),e.setStorageSync("email",n.data.email),e.setStorageSync("lastLoginTime",n.data.lastLoginTime),e.setStorageSync("articleLikeSet",n.data.articleLikeSet)},saveBlogInfo:function(n){e.setStorageSync("articleCount",n.data.articleCount),e.setStorageSync("messageCount",n.data.messageCount),e.setStorageSync("viewsCount",n.data.viewsCount),e.setStorageSync("userCount",n.data.userCount)},validateLogin:function(){var n=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;return""===this.username||void 0===this.username||""===this.password||void 0===this.password?(e.showToast({title:"请输入邮箱和密码",icon:"none"}),!1):!!n.test(this.username)||(e.showToast({title:"邮箱格式不正确",icon:"none"}),!1)},emailLogin:function(){var n=this;if(n.validateLogin()){var t={};t.username=n.username,t.password=n.password,n.$http("/login","POST",n.$qs.stringify(t),"application/x-www-form-urlencoded").then((function(t){2e4===t.code?(e.setStorageSync("isLogin",!0),n.saveUserInfo(t),n.$http("/admin").then((function(t){n.saveBlogInfo(t),e.navigateBack()}))):e.showToast({title:t.message,icon:"none"})}))}},showDeal:function(){this.isShowDeal=!0},qqLogin:function(){console.log("qq");var n=this;qq.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&qq.getUserInfo({success:function(t){var o={};o.nickname=t.userInfo.nickName,o.avatar=t.userInfo.avatarUrl,o.platform="MP-QQ",qq.login({success:function(t){o.code=t.code,n.$http("/users/oauth/qq","POST",o).then((function(t){2e4===t.code?(e.setStorageSync("isLogin",!0),n.saveUserInfo(t),n.$http("/admin").then((function(t){n.saveBlogInfo(t),e.navigateBack()}))):e.showToast({title:t.message,icon:"none"})}))}})}})}})},weiboLogin:function(){console.log("weibo");e.showToast({title:"小程序不支持微博登录，请使用其他登录方式",icon:"none"})},wxLogin:function(){e.showToast({title:"App和qq小程序不支持微信登录，请使用其他登录方式",icon:"none"})},toForget:function(){e.navigateTo({url:"/pages/mixLogin/forget/forget"})},toRegister:function(){e.navigateTo({url:"/pages/mixLogin/register/register"})},onShareAppMessage:function(){return{from:"menu"}},onShareTimeline:function(){}}};n.default=t}).call(this,t("a821")["default"])},"81fc":function(e,n,t){"use strict";t.r(n);var o=t("47e9"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"8a04":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}));var o={uModal:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-modal/u-modal")]).then(t.bind(null,"b662"))}},a=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.isShowDeal=!1})},i=[]},"976a":function(e,n,t){"use strict";var o=t("f7ef"),a=t.n(o);a.a},e109:function(e,n,t){"use strict";(function(e){t("9fd6");o(t("66fd"));var n=o(t("328b"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("a821")["createPage"])},f7ef:function(e,n,t){}},[["e109","common/runtime","common/vendor"]]]);