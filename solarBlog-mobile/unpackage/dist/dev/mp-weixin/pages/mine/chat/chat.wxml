<view class="chat"><view class="online-box"><view class="online-number">{{'在线人数:'+count+'人'}}</view></view><view data-event-opts="{{[['tap',[['setToolsHidden',['$event']]]]]}}" class="{{['chat-box',chatShow?'tools':'']}}" bindtap="__e"><scroll-view class="scroll-view" scroll-y="{{true}}" enable-back-to-top="{{true}}" scroll-top="{{scroll_top}}" scroll-into-view="{{viewId}}" data-event-opts="{{[['scroll',[['chatScroll',['$event']]]],['scrolltolower',[['scrolltolower',['$event']]]]]}}" bindscroll="__e" bindscrolltolower="__e"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__"><view class="message-container" id="{{'item'+item.$orig.id}}"><block wx:if="{{item.$orig.ipAddress!==ipAddress}}"><view class="userMessage-box"><view class="nickName-box"><image class="userAvatar" src="{{item.$orig.avatar}}"></image><text class="nickName">{{item.$orig.nickname}}</text><text class="date">{{item.g0}}</text></view><view class="userContent-box"><block wx:if="{{item.$orig.type===3}}"><view class="userContent"><rich-text nodes="{{item.$orig.content}}"></rich-text></view></block></view></view></block><block wx:else><view class="myMessage-box"><view class="nickName-box"><text class="date">{{item.g1}}</text><text class="nickName">{{item.$orig.nickname}}</text><image class="myAvatar" src="{{item.$orig.avatar}}"></image></view><view class="myContent-box"><block wx:if="{{item.$orig.type===3}}"><view class="myContent"><rich-text nodes="{{item.$orig.content}}"></rich-text></view></block></view></view></block></view></block></scroll-view></view><view class="tips-box"><view class="tips-title">温馨提示</view><view class="tips-content">请礼貌用语友好沟通,如不文明行为,将封禁账号。</view></view><view class="footer-box"><view class="action-box"><view data-event-opts="{{[['tap',[['handleQuickShow']]]]}}" class="action" bindtap="__e"><text class="iconfont icon-rounddown"></text></view><input class="input" type="text" data-event-opts="{{[['input',[['__set_model',['','inputMessage','$event',[]]]]]]}}" value="{{inputMessage}}" bindinput="__e"/><view data-event-opts="{{[['tap',[['handleEmojiShow']]]]}}" class="action" bindtap="__e"><text class="iconfont icon-emoji"></text></view><view class="action"><button class="{{['btn',disabled?'disabled':'']}}" size="mini" disabled="{{disabled}}" data-event-opts="{{[['tap',[['handleSend']]]]}}" bindtap="__e">发送</button></view></view><view class="{{['quickInput-box',quickShow?'show':'']}}"><block wx:for="{{quickList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectQuickMsg',['$0'],[[['quickList','',index]]]]]]]}}" class="quickInput-item" bindtap="__e">{{''+item+''}}</view></block></view><view class="{{['emoji-box',emojiShow?'show':'']}}"><view class="emoji-scroll-view-box"><swiper class="emoji-swiper" current="{{emoji_swiper}}"><block wx:if="{{faceType=='emoji'}}"><swiper-item><view class="swiper-item"><block wx:for="{{emojiList}}" wx:for-item="value" wx:for-index="key" wx:key="key"><block><image class="emoji" src="{{value}}" mode="widthFix" data-event-opts="{{[['tap',[['selectEmoji',[key]]]]]}}" bindtap="__e"></image></block></block></view></swiper-item></block><block wx:if="{{faceType=='gif'}}"><swiper-item><view class="swiper-item"><block wx:for="{{gifList}}" wx:for-item="value" wx:for-index="key" wx:key="key"><block><image class="emoji" src="{{value}}" mode="widthFix" data-event-opts="{{[['tap',[['selectGif',[key]]]]]}}" bindtap="__e"></image></block></block></view></swiper-item></block></swiper></view><scroll-view class="emoji-tools-scroll-view" scroll-x="{{true}}"><view class="{{['emoji-tools-item',faceType=='emoji'?'select':'']}}" id="emoji_tool1" data-event-opts="{{[['tap',[['switchEmoji',['emoji']]]]]}}" bindtap="__e"><text class="iconfont icon-emoji emoji"></text></view><view class="{{['emoji-tools-item',faceType=='gif'?'select':'']}}" id="emoji_tool2" data-event-opts="{{[['tap',[['switchGif',['gif']]]]]}}" bindtap="__e"><text class="iconfont icon-GIF emoji"></text></view></scroll-view></view></view></view>